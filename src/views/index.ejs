<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <title>Session y Cookies </title>
         <!-- FontAwesome-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" rel="stylesheet" />
    </head>
<body>
    <h1>Complete el formulario</h1>
    <header>
       
    </header>
    <main>
        <body>
            <style>
                body {
                    background-color: <%= session.userData ? session.userData.color : null %>
                }
                </style>
                <form action="/form" method="POST">
                <div class ="formContainer">
                    <div class="tus-datos">
                        <% if (session.userData) { %>
                            <div>
                                <h2>Tus datos</h2>
                                <p>Hola <%= session.userData.name %>,</p>
                                <p>Elegiste el color: <%= session.userData.colorTexto %></p>
                                <p>Tu mail es: <%= session.userData.mail %></p>
                                <p>Tu edad es: <%= session.userData.age %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="form-group">
                        <label for="name">Ingrese su nombre</label>
                        <input class="<%= locals.errors && errors.name ? 'is-invalid' : null%> form-control" type="text" name="name" id="name" value="<%= locals.old && locals.old.name ? locals.old.name : null %>">
                        <small class="text-danger ms-2"><%= locals.errors && errors.name ? errors.name.msg : null%></small>
                    </div>
                    <div class="form-group">
                        <label for="color">Seleccione un color</label>
                        <select class=" form-control <%= locals.errors && errors.color ? 'is-invalid' : null%> " name="color" id="color">
                            <option value="" selected hidden>Presiona para seleccionar un color</option>
                            <% colores.forEach(color=> { %>
                            <option value="<%= color.valor %>" <%= locals.old && color.valor == old.color ? 'selected' : null %>><%= color.texto %></option>
                    <% }) %>
                        </select>
                        <small class="text-danger ms-2"><%= locals.errors && errors.color ? errors.color.msg : null%></small>
                    </div>
                    <div class="form-group">
                        <label for="mail">Ingrese su mail</label>
                        <input class="<%= locals.errors && errors.mail ? 'is-invalid' : null%> form-control" type="email" name="mail" id="mail"  value="<%= locals.old && locals.old.mail ? locals.old.mail : null %>">
                        <small class="text-danger ms-2"><%= locals.errors && errors.mail ? errors.mail.msg : null%></small>
                    </div>
                    <div class="form-group">
                        <label for="age">Ingrese su edad</label>
                        <input class="<%= locals.errors && errors.age ? 'is-invalid' : null%> form-control" type="text" name="age" id="age" value="<%= locals.old && locals.old.age ? locals.old.age : null %>">
                        <small class="text-danger ms-2"><%= locals.errors && errors.age ? errors.age.msg : null%></small>
                    </div>
                    <div class="form-check">
                        <label for="recordar">Recordar</label>
                        <input type="checkbox" name="recordar" id="recordar">
                    </div>               
                       
                        <button class="enviar" type="submit">Enviar</button>
                        <button class="borrar" type="submit"> <a href="/borrar">Borrar</a></button>
                </form>
                <h2><a href="/gracias"> Bienvenida </a></h2>
              
        </div>
        </body>
    </main>
</body>
</html>